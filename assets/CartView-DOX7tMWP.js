import{L as V}from"./LoadingOverlay-BaGJTY_t.js";import{c as b}from"./cartStore-BFUONUjG.js";import{_ as k,m as C,f as U,r as p,o as n,c as d,b as a,a as e,d as f,t as r,F as w,g as $,e as u,i as v,v as g,w as S,l as m}from"./index-Bs_37LNX.js";const L={computed:{...C(b,["cart","loadingStatus","loadingIcon","form","resetUserForm"]),coupon_code:{get(){return""},set(s){b().coupon_code=s}}},components:{LoadingOverlay:V},methods:{...U(b,["getCartList","updateQty","delProduct","delAll","sendOrder","addCouponCode"])},mounted(){this.getCartList()},watch:{resetUserForm(){this.$refs.form.resetForm()}}},q={class:"container"},B={key:0,class:"alert alert-secondary text-center m-5"},F={key:1},I={class:"text-end mt-2"},O=["disabled"],A={class:"badge rounded-pill bg-primary"},N={class:"table align-middle"},E=e("thead",null,[e("tr",null,[e("th"),e("th",null,"品名"),e("th",{class:"text-center",style:{width:"150px"}},"數量/單位"),e("th",{class:"text-end"},"單價")])],-1),D=["onClick","disabled"],P={key:0,class:"fas fa-spinner fa-pulse"},Q={key:0,class:"text-success"},T={class:"input-group input-group-sm"},j={class:"input-group mb-3"},z=["onUpdate:modelValue","disabled","onBlur"],M={class:"input-group-text",id:"basic-addon2"},G={class:"text-end"},H={key:0,class:"text-success"},J=e("td",{colspan:"3",class:"text-end"},"總計",-1),K={class:"text-end"},R={key:0},W=e("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),X={class:"text-end text-success"},Y={class:"input-group mb-3 input-group-sm",style:{width:"500px"}},Z={class:"input-group-append"},x={class:"my-5 row justify-content-center"},ee={class:"mb-3"},se=e("label",{for:"email",class:"form-label"},"Email",-1),te={class:"mb-3"},oe=e("label",{for:"name",class:"form-label"},"收件人姓名",-1),le={class:"mb-3"},ae=e("label",{for:"tel",class:"form-label"},"收件人電話",-1),ne={class:"mb-3"},de=e("label",{for:"address",class:"form-label"},"收件人地址",-1),re={class:"mb-3"},ie=e("label",{for:"message",class:"form-label"},"留言",-1),ce=e("div",{class:"text-end"},[e("button",{type:"submit",class:"btn btn-danger"},"送出訂單")],-1);function ue(s,o,me,pe,fe,_){const h=p("LoadingOverlay"),i=p("v-field"),c=p("error-message"),y=p("v-form");return n(),d("div",q,[a(h,{active:s.loadingStatus,"onUpdate:active":o[0]||(o[0]=t=>s.loadingStatus=t),"is-full-page":!0},null,8,["active"]),s.cart.carts.length===0?(n(),d("div",B,"購物車是空的")):(n(),d("div",F,[e("div",I,[e("button",{class:"btn btn-outline-danger",type:"button",onClick:o[1]||(o[1]=(...t)=>s.delAll&&s.delAll(...t)),disabled:s.loadingIcon!==""||s.cart.carts.length===0},[f("清空購物車 "),e("span",A,r(s.cart.carts.length),1)],8,O)]),e("table",N,[E,e("tbody",null,[s.cart.carts?(n(!0),d(w,{key:0},$(s.cart.carts,t=>(n(),d("tr",{key:t.id},[e("td",null,[e("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:l=>s.delProduct(t.id),disabled:s.loadingIcon===t.id},[s.loadingIcon===t.id?(n(),d("i",P)):u("",!0),f(" x ")],8,D)]),e("td",null,[f(r(t.product.title)+" ",1),t.coupon?(n(),d("div",Q," 已套用優惠券 ")):u("",!0)]),e("td",null,[e("div",T,[e("div",j,[v(e("input",{min:"1",type:"number",class:"form-control","onUpdate:modelValue":l=>t.qty=l,disabled:s.loadingIcon===t.id,onBlur:l=>s.updateQty(t)},null,40,z),[[g,t.qty,void 0,{number:!0}]]),e("span",M,r(t.product.unit),1)])])]),e("td",G,[t.coupon?(n(),d("small",H,"折扣價：")):u("",!0),f(" "+r(s.$filters.currency(t.final_total)),1)])]))),128)):u("",!0)]),e("tfoot",null,[e("tr",null,[J,e("td",K,r(s.$filters.currency(s.cart.total)),1)]),s.cart.total!==s.cart.final_total?(n(),d("tr",R,[W,e("td",X,r(s.$filters.currency(s.cart.final_total)),1)])):u("",!0)])]),e("div",Y,[v(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[2]||(o[2]=t=>_.coupon_code=t),placeholder:"請輸入優惠碼"},null,512),[[g,_.coupon_code]]),e("div",Z,[e("button",{class:"btn btn-outline-secondary ms-2",type:"button",onClick:o[3]||(o[3]=(...t)=>s.addCouponCode&&s.addCouponCode(...t))}," 套用優惠碼 ")])])])),e("div",x,[a(y,{ref:"form",class:"col-md-6",onSubmit:s.sendOrder},{default:S(({errors:t})=>[e("div",ee,[se,a(i,{id:"email",name:"email",type:"email",class:m(["form-control",{"is-invalid":t.email}]),placeholder:"請輸入 Email",rules:"required|email",modelValue:s.form.user.email,"onUpdate:modelValue":o[4]||(o[4]=l=>s.form.user.email=l)},null,8,["class","modelValue"]),a(c,{name:"email",class:"invalid-feedback"})]),e("div",te,[oe,a(i,{id:"name",name:"姓名",type:"text",class:m(["form-control",{"is-invalid":t.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:s.form.user.name,"onUpdate:modelValue":o[5]||(o[5]=l=>s.form.user.name=l)},null,8,["class","modelValue"]),a(c,{name:"姓名",class:"invalid-feedback"})]),e("div",le,[ae,a(i,{id:"tel",name:"電話",type:"tel",class:m(["form-control",{"is-invalid":t.電話}]),placeholder:"請輸入電話",rules:"required|regex:^(09)[0-9]{8}$",modelValue:s.form.user.tel,"onUpdate:modelValue":o[6]||(o[6]=l=>s.form.user.tel=l)},null,8,["class","modelValue"]),a(c,{name:"電話",class:"invalid-feedback"})]),e("div",ne,[de,a(i,{id:"address",name:"地址",type:"text",class:m(["form-control",{"is-invalid":t.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:s.form.user.address,"onUpdate:modelValue":o[7]||(o[7]=l=>s.form.user.address=l)},null,8,["class","modelValue"]),a(c,{name:"地址",class:"invalid-feedback"})]),e("div",re,[ie,a(i,{name:"留言",as:"textarea",id:"message",class:m(["form-control",{"is-invalid":t.留言}]),cols:"30",rows:"10",rules:"",modelValue:s.form.message,"onUpdate:modelValue":o[8]||(o[8]=l=>s.form.message=l)},null,8,["class","modelValue"]),a(c,{name:"留言",class:"invalid-feedback"})]),ce]),_:1},8,["onSubmit"])])])}const ge=k(L,[["render",ue]]);export{ge as default};
