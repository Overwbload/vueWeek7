import{j as n,k as e}from"./index-Bs_37LNX.js";const d={BASE_URL:"/vueWeek7/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_API_NAME:"jasonfu-api-vuetest",VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2"},{VITE_APP_API_URL:r,VITE_APP_API_NAME:o}=d,h=n("cart",{state:()=>({cart:{carts:[]},comparisonCart:{carts:[]},loadingStatus:"",loadingIcon:"",form:{user:{email:"",name:"",tel:"",address:""},message:""},resetUserForm:"",coupon_code:""}),actions:{getCartList(){const t=`${r}/api/${o}/cart`;e.get(t).then(a=>{this.cart=a.data.data,this.comparisonCart=JSON.parse(JSON.stringify(a.data.data)),this.loadingStatus=!1}).catch(a=>{alert(a.response.data.message)})},updateQty(t){const a=this.comparisonCart.carts.find(s=>s.product_id===t.product_id);if(a&&a.qty!==t.qty){this.loadingIcon=t.id,t.qty<=0&&(alert("數量必須大於0"),t.qty=1);const s={product_id:t.product_id,qty:t.qty},c=`${r}/api/${o}/cart/${t.id}`;e.put(c,{data:s}).then(i=>{this.loadingIcon="",alert(i.data.message),this.getCartList()}).catch(i=>{alert(i.response.data.message)})}},delProduct(t){if(this.loadingIcon=t,this.cart.carts.find(s=>s.id===t)){const s=`${r}/api/${o}/cart/${t}`;e.delete(s).then(c=>{alert(c.data.message),this.getCartList(),this.loadingIcon=""}).catch(c=>{alert(c.response.data.message)})}},delAll(){this.loadingStatus=!0;const t=`${r}/api/${o}/carts`;e.delete(t).then(a=>{alert(a.data.message),this.getCartList(),this.loadingStatus=!1}).catch(a=>{alert(a.response.data.message),this.loadingStatus=!1})},sendOrder(){this.resetUserForm=!1;const t=this.form,a=`${r}/api/${o}/order`;e.post(a,{data:t}).then(s=>{this.resetUserForm=!0,this.getCartList(),alert(s.data.message)}).catch(s=>{this.resetUserForm=!0,alert(s.response.data.message)})},addCouponCode(){const t=`${r}/api/${o}/coupon`,a={code:this.coupon_code};e.post(t,{data:a}).then(s=>{console.log(s),this.getCartList(),alert(s.data.message)}).catch(s=>{alert(s.response.data.message)})}}});export{h as c};
